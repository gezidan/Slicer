
#SET(CMAKE_TESTDRIVER_BEFORE_TESTMAIN "DEBUG_LEAKS_ENABLE_EXIT_ERROR();" )
CREATE_TEST_SOURCELIST(Tests ${EXTENSION_NAME}CxxTests.cxx
  #Add tests here
  qSlicer${EXTENSION_NAME}ModuleTest1.cxx
  #EXTRA_INCLUDE TestingMacros.h
  )

SET(LIBRARY_NAME qSlicer${EXTENSION_NAME}Module)

ADD_EXECUTABLE(${EXTENSION_NAME}CxxTests ${Tests})
TARGET_LINK_LIBRARIES(${EXTENSION_NAME}CxxTests ${lib_name})

MACRO(SIMPLE_TEST TESTNAME)
  ADD_TEST(NAME ${TESTNAME} COMMAND ${Slicer_LAUNCH_COMMAND} $<TARGET_FILE:${EXTENSION_NAME}CxxTests> ${TESTNAME} ${ARGN})
ENDMACRO()

SIMPLE_TEST( qSlicer${EXTENSION_NAME}ModuleTest1 )
